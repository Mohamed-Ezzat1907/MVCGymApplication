@model MemberDetailsDTO

@{
    ViewData["Title"] = "Member Details";
}

<div class="container my-5">
    <main role="main" class="pb-3">

        <div class="row justify-content-center">
            <div class="col-lg-7 col-md-9">
                <div class="card shadow-lg border-0 rounded-4 overflow-hidden">

                    <!-- Header with image -->
                    <div class="card-header bg-primary-color position-relative text-center py-5">
                        <img src="@(Model.Photo != null ? Url.Content(Model.Photo) : Url.Content("~/images/User.jpg"))"
                             alt="@Model.Name"
                             class="rounded-circle border border-3 border-white shadow-sm"
                             style="width: 130px; height: 130px; object-fit: cover; position: absolute; left: 50%; top: 100%; transform: translate(-50%, -50%);" />

                        <h2 class="text-white fw-bold mb-0">@Model.Name</h2>
                        <p class="text-white-50 mb-0">@(Model.PlanName ?? "No Active Plan")</p>
                    </div>

                    <!-- Body -->
                    <div class="card-body bg-light pt-5 px-5 pb-4 mt-5">
                        <div class="row g-3">

                            <!-- Email -->
                            <div class="col-md-12">
                                <div class="info-box">
                                    <small class="text-muted d-block mb-1">Email</small>
                                    <strong>@Model.Email</strong>
                                </div>
                            </div>

                            <!-- Phone -->
                            <div class="col-md-12">
                                <div class="info-box">
                                    <small class="text-muted d-block mb-1">Phone</small>
                                    <strong>@Model.Phone</strong>
                                </div>
                            </div>

                            <!-- Gender -->
                            <div class="col-md-6">
                                <div class="info-box">
                                    <small class="text-muted d-block mb-1">Gender</small>
                                    <strong>@Model.Gender</strong>
                                </div>
                            </div>

                            <!-- Birth Date -->
                            <div class="col-md-6">
                                <div class="info-box">
                                    <small class="text-muted d-block mb-1">Date of Birth</small>
                                    <strong>
                                        @{
                                            if (DateTime.TryParse(Model.DateOfBirth?.ToString(), out var dob))
                                            {
                                                @dob.ToShortDateString()
                                            }
                                            else
                                            {
                                                @("-")
                                            }
                                        }
                                    </strong>
                                </div>
                            </div>

                            @if (Model.PlanName != null)
                            {
                                <div class="col-md-6">
                                    <div class="info-box">
                                        <small class="text-muted d-block mb-1">Membership Start</small>
                                        <strong>
                                            @{
                                                if (DateTime.TryParse(Model.MemberShipStartDate?.ToString(), out var start))
                                                {
                                                    @start.ToShortDateString()
                                                }
                                                else
                                                {
                                                    @("-")
                                                }
                                            }
                                        </strong>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="info-box">
                                        <small class="text-muted d-block mb-1">Membership End</small>
                                        <strong>
                                            @{
                                                if (DateTime.TryParse(Model.MemberShipEndDate?.ToString(), out var end))
                                                {
                                                    @end.ToShortDateString()
                                                }
                                                else
                                                {
                                                    @("-")
                                                }
                                            }
                                        </strong>
                                    </div>
                                </div>
                            }

                            <!-- Address -->
                            <div class="col-12">
                                <div class="info-box">
                                    <small class="text-muted d-block mb-1">Address</small>
                                    <strong>@Model.Address</strong>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer bg-white text-center py-4">
                        <a asp-controller="Member" asp-action="Index" class="btn btn-primary px-5 py-2">
                            <i class="bi bi-arrow-left me-2"></i> Back to Members
                        </a>
                    </div>

                </div>
            </div>
        </div>

    </main>
</div>